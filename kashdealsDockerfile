FROM odoo:18.0

# Set environment variable for DB host
ENV HOST=89.116.20.12:5433

# Copy custom addons into image
COPY ./custom_addons /mnt/extra-addons

# Copy existing Odoo data (filestore)
COPY ./data /var/lib/odoo

# Fix permissions (Odoo runs as user 'odoo')
USER root
# Change owner to 'odoo' and make directories writable
RUN chown -R odoo:odoo /mnt/extra-addons /var/lib/odoo \
    && chmod -R 775 /var/lib/odoo /mnt/extra-addons

USER odoo