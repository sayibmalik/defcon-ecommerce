FROM odoo:18.0

USER root

# Install Python and pip
RUN apt-get update && \
    apt-get install -y python3-pip python3-venv && \
    apt-get clean

# Create virtualenv and install Python dependencies
#RUN python3 -m venv /opt/venv && \
#    /opt/venv/bin/pip install --upgrade pip

COPY odoorequirements.txt /tmp/requirements.txt
#RUN /opt/venv/bin/pip install -r /tmp/requirements.txt
#RUN /usr/bin/python3 -m pip install -r requirements.txt
RUN /usr/bin/python3 -m pip install --break-system-packages qifparse
#ENV PATH="/opt/venv/bin:$PATH"

# Copy custom addons and config (if needed)
#COPY ./custom_addons /mnt/extra-addons
#COPY ./odoo.conf /etc/odoo/odoo.conf

CMD ["odoo"]